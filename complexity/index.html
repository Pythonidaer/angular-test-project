<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complexity Report</title>
  <link rel="stylesheet" href="shared.css" />
  <style>
    #exportMenu a:hover {
      background-color: #f5f5f5;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <div class="pad2">
    <div class="header-row">
      <h1>All files</h1>
      <a href="about.html" class="about-link">About Cyclomatic Complexity</a>
    </div>
    <div class="clearfix">
      <div class='fl pad1y space-right2'>
        <span class="strong">36.36%</span>
        <span class="quiet">Functions</span>
        <span class='fraction'>4/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="quiet">Control Flow</span>
        <span class='fraction'>46</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="quiet">Expressions</span>
        <span class='fraction'>65</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="quiet">Default Parameters</span>
        <span class='fraction'>13</span>
      </div>
    </div>
    <div class="quiet" style="margin-top: 14px; display: flex; align-items: center; gap: 15px;">
      <span>Filter:</span>
      <input type="search" id="fileSearch" style="flex: 0 0 auto; width: auto;">
      <div style="position: relative;">
        <button id="exportBtn" style="padding: 6px 12px; font-size: 13px; cursor: pointer; border: 1px solid var(--color-muted, #ccc); background: var(--color-bg, #fff); color: var(--color-text, #000); border-radius: 2px;">Export</button>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
  <div class="pad2">
            <div class="folder-view" id="folderView">
          <table class="coverage-summary">
            <thead>
              <tr>
                <th class="file" data-sort="file">File <span class="sorter"></span></th>
                <th class="bar" data-sort="percentage" style="text-align: right;"><span class="sorter"></span></th>
                <th class="pic" data-sort="percentage" style="text-align: left;">Functions <span class="sorter"></span></th>
                <th class="pct" data-sort="functions" style="text-align: right;"><span class="sorter"></span></th>
              </tr>
            </thead>
            <tbody>
              
    <tr data-file="src"
        data-functions="1/1"
        data-percentage="100">
      <td class="file">
        <a href="src/index.html">
          src
        </a>
      </td>
      <td class="bar high">
        <div class="chart">
          <div class="cover-fill high cover-full"
               style="width: 100%"></div>
          <div class="cover-empty" style="width: 0%"></div>
        </div>
      </td>
      <td class="pic">100%</td>
      <td class="pct">1/1</td>
    </tr>
  
    <tr data-file="src/app"
        data-functions="2/7"
        data-percentage="28.57142857142857">
      <td class="file">
        <a href="src/app/index.html">
          src/app
        </a>
      </td>
      <td class="bar low">
        <div class="chart">
          <div class="cover-fill low "
               style="width: 28.57142857142857%"></div>
          <div class="cover-empty" style="width: 71.42857142857143%"></div>
        </div>
      </td>
      <td class="pic">28.57%</td>
      <td class="pct">2/7</td>
    </tr>
  
    <tr data-file="src/app/complexity-tests/deep/nested/decision-points"
        data-functions="1/3"
        data-percentage="33.33333333333333">
      <td class="file">
        <a href="src/app/complexity-tests/deep/nested/decision-points/index.html">
          src/app/complexity-tests/deep/nested/decision-points
        </a>
      </td>
      <td class="bar low">
        <div class="chart">
          <div class="cover-fill low "
               style="width: 33.33333333333333%"></div>
          <div class="cover-empty" style="width: 66.66666666666667%"></div>
        </div>
      </td>
      <td class="pic">33.33%</td>
      <td class="pct">1/3</td>
    </tr>
  
            </tbody>
          </table>
        </div>
  </div>
  <div class='footer quiet pad2 space-top1 center small'>
    Complexity report generated by <a href="https://www.github.com/pythonidaer" target="_blank" rel="noopener noreferrer">pythonidaer</a> at 2026-02-09T17:06:28.744Z
  </div>
  <script>
    (function() {
      const headers = document.querySelectorAll('.coverage-summary th[data-sort]');
      let currentSort = { column: null, direction: 'asc' };
      
      // Filter functionality
      const fileSearch = document.getElementById('fileSearch');
      if (fileSearch) {
        fileSearch.addEventListener('input', function() {
          const searchValue = this.value;
          const tbody = document.querySelector('.coverage-summary tbody');
          if (!tbody) return;
          const rows = Array.from(tbody.querySelectorAll('tr'));
          
          // Try to create a RegExp from the searchValue. If it fails (invalid regex),
          // it will be treated as a plain text search
          let searchRegex;
          try {
            searchRegex = new RegExp(searchValue, 'i'); // 'i' for case-insensitive
          } catch (error) {
            searchRegex = null;
          }
          
          rows.forEach(row => {
            let isMatch = false;
            
            if (searchRegex) {
              // If a valid regex was created, use it for matching
              isMatch = searchRegex.test(row.textContent);
            } else {
              // Otherwise, fall back to the original plain text search
              isMatch = row.textContent.toLowerCase().includes(searchValue.toLowerCase());
            }
            
            row.style.display = isMatch ? '' : 'none';
          });
        });
      }
      
      function getSortValue(row, column) {
        if (column === 'file') {
          return row.getAttribute('data-file') || '';
        }
        if (column === 'functions') {
          const parts = (row.getAttribute('data-functions') || '0/0').split('/');
          return parseInt(parts[1] || 1, 10);
        }
        if (column === 'percentage') {
          return parseFloat(row.getAttribute('data-percentage') || 0);
        }
        return 0;
      }
      
      function compareValues(aVal, bVal, direction, column) {
        if (column === 'functions') {
          if (direction === 'desc') {
            return bVal > aVal ? 1 : bVal < aVal ? -1 : 0;
          }
          return aVal > bVal ? 1 : aVal < bVal ? -1 : 0;
        }
        
        if (typeof aVal === 'string') {
          const comparison = aVal.localeCompare(bVal);
          return direction === 'asc' ? comparison : -comparison;
        }
        
        if (direction === 'asc') {
          return aVal > bVal ? 1 : aVal < bVal ? -1 : 0;
        }
        return aVal < bVal ? 1 : aVal > bVal ? -1 : 0;
      }
      
      headers.forEach(header => {
        header.addEventListener('click', function() {
          const column = this.getAttribute('data-sort');
          const tbody = this.closest('table').querySelector('tbody');
          const rows = Array.from(tbody.querySelectorAll('tr'));
          
          if (currentSort.column === column) {
            currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
          } else {
            currentSort.column = column;
            currentSort.direction = (column === 'functions' || column === 'percentage') ? 'desc' : 'asc';
          }
          
          headers.forEach(h => {
            // Remove sorted classes from all headers
            h.classList.remove('sorted', 'sorted-desc');
            // Add appropriate class to the clicked header
            if (h === this) {
              if (currentSort.direction === 'asc') {
                h.classList.add('sorted');
              } else {
                h.classList.add('sorted-desc');
              }
            }
          });
          
          rows.sort((a, b) => {
            const aVal = getSortValue(a, column);
            const bVal = getSortValue(b, column);
            return compareValues(aVal, bVal, currentSort.direction, column);
          });
          
          tbody.innerHTML = '';
          rows.forEach(row => tbody.appendChild(row));
        });
      });
      
      // Export functionality
      const exportBtn = document.getElementById('exportBtn');
      if (exportBtn) {
        const exportMenu = document.createElement('div');
        exportMenu.id = 'exportMenu';
        exportMenu.style.cssText = 'display: none; position: absolute; top: 100%; left: 0; background: white; border: 1px solid #ccc; border-radius: 2px; padding: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 1000; margin-top: 4px; min-width: 240px;';
        exportMenu.innerHTML = '<div style="display: flex; flex-direction: column; gap: 4px;">' +
          '<a href="reports/function-names.all.txt" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">All Functions (TXT)</a>' +
          '<a href="reports/function-names.all-leaf.txt" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">All Functions – leaf only (TXT)</a>' +
          '<a href="reports/function-names.all.md" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">All Functions (Markdown)</a>' +
          '<hr style="margin: 4px 0; border: none; border-top: 1px solid #ccc;">' +
          '<a href="reports/function-names-by-file.txt" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">By Folder/File (TXT)</a>' +
          '<a href="reports/function-names-by-file-leaf.txt" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">By Folder/File – leaf only (TXT)</a>' +
          '<a href="reports/function-names-by-file.md" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">By Folder/File (Markdown)</a>' +
          '<hr style="margin: 4px 0; border: none; border-top: 1px solid #ccc;">' +
          '<a href="reports/file-names-alphabetical.txt" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">File names – (TXT)</a>' +
          '<a href="reports/file-names-alphabetical.md" download style="padding: 4px 8px; text-decoration: none; color: #000; display: block;">File names – (Markdown)</a>' +
          '</div>';
        exportBtn.parentElement.appendChild(exportMenu);
        
        exportBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          exportMenu.style.display = exportMenu.style.display === 'none' ? 'block' : 'none';
        });
        
        document.addEventListener('click', function(e) {
          if (!exportBtn.contains(e.target) && !exportMenu.contains(e.target)) {
            exportMenu.style.display = 'none';
          }
        });
      }
    })();
  </script>
</body>
</html>